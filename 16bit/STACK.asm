.MODEL SMALL
.STACK 100H
.DATA
MSG DB 13,10,'TIM THAY:$'

OK DB 13,10,'SO FILE VA FODER: $'
NOTOK DB 13,10,'KHONG TIM THAY$'

LINK DB "*.*",0
ENTER DB 13,10,' $'

DTA DB 43H DUP(0) 
DEM DW 0
LUY_THUA DW 10

.CODE
START: 
MOV AX, @DATA
MOV DS, AX 
MOV ES, AX

XOR CX, CX	
MOV DX, OFFSET DTA
MOV AH, 1AH
INT 21H

MOV DX, OFFSET LINK 
XOR CX, CX
MOV CL, 3FH
MOV AH, 4EH	
INT 21H 

JC ERROR
MOV AH, 9
LEA DX, MSG
INT 21H

WHILE_:	

;HIEN FILE VA FOLDER
INC DEM

MOV AH, 9
LEA DX, ENTER
INT 21H

MOV DX, OFFSET DTA
ADD DX, 1EH

;CHI DEN VUNG TEN
MOV SI, DX
MOV BYTE PTR [SI + 14], '$'
INT 21H

MOV AH, 4FH
INT 21H
JC END_WHILE

JMP WHILE_
END_WHILE:
	
MOV AH, 9
LEA DX, OK
INT 21H	

;HIEN THI THEO DANG THAP PHAN SO FILE
SUB DEM, 2
MOV AX, DEM 
XOR CX, CX
XOR DX, DX
FOR3:

;TACH TUNG CHU SO' O TUNG 10^N VAO` TRONG STACK
DIV LUY_THUA
PUSH DX 
INC CX
CMP AX, 0
JE END_FOR3 
MOV DX, 0
JMP FOR3
END_FOR3:

MOV AH,2 ;HIEN TUNG CHU SO' DO'
FOR4: 
POP DX
OR DX, 30H
INT 21H
LOOP FOR4


JMP KET 


ERROR:
MOV AH, 9
LEA DX, NOTOK
INT 21H	 


KET: 
;LEA DX, MSG1
;MOV AH, 9
;INT 21H 

MOV AH, 1
INT 21H 

MOV AH, 4CH
INT 21H
END START